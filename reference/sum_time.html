<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sum time objects — sum_time • lubritime</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sum time objects — sum_time"><meta name="description" content="
sum_time() returns the sum of the time from different kinds of date/time
objects.
vct_sum_time() returns the vectorized sum of the time from different kinds
of date/time objects.
Both functions can be set to work with a circular time frame (see Details to
learn more)."><meta property="og:description" content="
sum_time() returns the sum of the time from different kinds of date/time
objects.
vct_sum_time() returns the vectorized sum of the time from different kinds
of date/time objects.
Both functions can be set to work with a circular time frame (see Details to
learn more)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lubritime</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/danielvartan/lubritime/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sum time objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/danielvartan/lubritime/blob/main/R/sum_time.R" class="external-link"><code>R/sum_time.R</code></a></small>
      <div class="d-none name"><code>sum_time.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing" class="external-link"><img src="figures/lifecycle-maturing.svg" alt="[Maturing]"></a></p>
<p><code>sum_time()</code> returns the sum of the time from different kinds of date/time
objects.</p>
<p><code>vct_sum_time()</code> returns the vectorized sum of the time from different kinds
of date/time objects.</p>
<p>Both functions can be set to work with a circular time frame (see Details to
learn more).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sum_time</span><span class="op">(</span><span class="va">...</span>, cycle <span class="op">=</span> <span class="cn">NULL</span>, reverse <span class="op">=</span> <span class="cn">TRUE</span>, na_rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vct_sum_time</span><span class="op">(</span><span class="va">...</span>, cycle <span class="op">=</span> <span class="cn">NULL</span>, reverse <span class="op">=</span> <span class="cn">TRUE</span>, na_rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Objects belonging to one of the following classes:
<code><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">Duration</a></code>, <code><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></code>, or
<code><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">hms</a></code>, <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">POSIXct</a></code>,
<code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">POSIXlt</a></code>, or <code><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">Interval</a></code>.</p></dd>


<dt id="arg-cycle">cycle<a class="anchor" aria-label="anchor" href="#arg-cycle"></a></dt>
<dd><p>(optional) A <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> or
<code><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">Duration</a></code> object of length 1, equal or greater
than 0, indicating the cycle length in seconds. If <code>NULL</code> the function will
perform a linear sum (see Details to learn more) (default: <code>NULL</code>).</p></dd>


<dt id="arg-reverse">reverse<a class="anchor" aria-label="anchor" href="#arg-reverse"></a></dt>
<dd><p>(optional) A <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> value indicating if
the function must use a reverse cycle for negative sums (see Details to
learn more) (default: <code>TRUE</code>).</p></dd>


<dt id="arg-na-rm">na_rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>(optional) a <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> value indicating if
the function must remove <code>NA</code> values while performing the sum (default:
<code>FALSE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p>If <code>cycle = NULL</code>, a <code><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">Duration</a></code> object with a
linear sum of the time from objects in <code>...</code>.</p></li>
<li><p>If <code>cycle != NULL</code>, a <code><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">Duration</a></code> object with a
circular sum of the time from objects in <code>...</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="sum-time-versus-vct-sum-time-"><code>sum_time()</code> versus <code>vct_sum_time()</code><a class="anchor" aria-label="anchor" href="#sum-time-versus-vct-sum-time-"></a></h3>


<p><code>sum_time()</code> behaves similar to <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code>, in the sense that it
aggregates the time lengths of values in <code>...</code> into a single data point. For
example, <code>sum_time(c(x, y), z)</code> will have the same output as <code>sum_time(x, y, z)</code>.</p>
<p><code>vct_sum_time()</code> performs a different type of sum (a vectorized one). Instead
of aggregating the time lengths, the function perform a paired sum between
elements. For example, <code>vct_sum_time(c(x, y), c(w, z))</code> will return a vector
like <code>c(sum_time(x, w), sum_time(y, z))</code>. Because of that, <code>vct_sum_time()</code>
requires that all objects in <code>...</code> have the same length.</p>
</div>

<div class="section">
<h3 id="linear-versus-circular-time">Linear versus circular time<a class="anchor" aria-label="anchor" href="#linear-versus-circular-time"></a></h3>


<p>Time can have different "shapes".</p>
<p>If the objective is to measure the duration (time span) of an event, time is
usually measured considering a linear frame, with a fixed point of
<a href="https://en.wikipedia.org/wiki/Origin_(mathematics)" class="external-link">origin</a>. In this
context, the time value distance itself to infinity in relation to the
origin.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>                                   B</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                             <span class="sc">|----------</span><span class="er">|</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                                        A</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>                             <span class="sc">|---------------------</span><span class="er">|</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a> <span class="sc">-</span> inf                                                inf <span class="sc">+</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="er">&lt;</span><span class="sc">----------------------------</span><span class="er">|</span><span class="sc">----------</span><span class="er">|</span><span class="sc">----------</span><span class="er">|</span><span class="sc">------</span><span class="ot">-&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a> s                           <span class="dv">0</span>          <span class="dv">5</span>          <span class="dv">10</span>     s</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>                           origin</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>A <span class="sc">+</span> B <span class="ot">=</span> <span class="dv">10</span> <span class="sc">+</span> <span class="dv">5</span> <span class="ot">=</span> <span class="dv">15</span>s</span></code></pre><p></p></div>
<p>But that's not the only possible "shape" of time, as it can also be measured
in other contexts.</p>
<p>In a "time of day" context, time will be linked to the rotation of the
earth, "resetting" when a new rotation cycle starts. That brings a different
kind of shape to time: a circular shape. With this shape the time value
encounters the origin at the end of each cycle.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>               <span class="sc">-</span> <span class="er">&lt;</span><span class="sc">---</span> h <span class="sc">--</span><span class="ot">-&gt;</span> <span class="sc">+</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                    origin</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                . . . <span class="dv">0</span> . . .</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>             .                 .</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>            .                   .</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>           .                     .</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>          .                       .</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>         .                         .</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>         <span class="dv">18</span>                        <span class="dv">6</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>         .                         .</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>          .                       .</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>           .                     .</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>            .                   .</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>             .                 .</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>                . . . <span class="dv">12</span> . . .</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="dv">18</span> <span class="sc">+</span> <span class="dv">6</span> <span class="ot">=</span> <span class="dv">0</span>h</span></code></pre><p></p></div>
<p>If we transpose this circular time frame to a linear one, it would look like
this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ot">&lt;-</span><span class="sc">---</span><span class="er">|</span><span class="sc">---------------</span><span class="er">|</span><span class="sc">---------------</span><span class="er">|</span><span class="sc">---------------</span><span class="er">|</span><span class="sc">----</span><span class="ot">-&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="dv">0</span>h              <span class="dv">12</span>h              <span class="dv">0</span>h             <span class="dv">12</span>h</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  origin                           origin</span></code></pre><p></p></div>
<p>Note that now the origin is not fix, but cyclical.</p>
<p><code>sum_time()</code> and <code>vct_sum_time()</code> can both operate in either a linear or a
circular fashion. If <code>cycle = NULL</code> (default), the function will use a
linear approach. Else, the function will use a circular approach relative to
the cycle length (e.g, <code>cycle = 86400</code> (1 day)).</p>
</div>

<div class="section">
<h3 id="fractional-time">Fractional time<a class="anchor" aria-label="anchor" href="#fractional-time"></a></h3>


<p><code>sum_time()</code> uses the <code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></code> operator to cycle values.
Hence, it can be subject to catastrophic loss of accuracy if values in <code>...</code>
are fractional and much larger than <code>cycle</code>. A warning is given if this is
detected.</p>
<p><code><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></code> is a <code>builtin</code> R function that operates like this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="cf">function</span>(a, b) {</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    a <span class="sc">-</span> <span class="fu">floor</span>(a <span class="sc">/</span> b) <span class="sc">*</span> b</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>}</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="negative-time-cycling">Negative time cycling<a class="anchor" aria-label="anchor" href="#negative-time-cycling"></a></h3>


<p>If the sum of the time is negative, with a <code>cycle</code> assigned and
<code>reverse = FALSE</code>, <code>sum_time()</code> and <code>vtc_sum_time()</code> will perform the cycle
considering the absolute value of the sum and return the result with a
negative signal.</p>
<p>However, If the sum of the time have a negative value, with a <code>cycle</code>
assigned and <code>reverse = TRUE</code> (default), <code>sum_time()</code> and <code>vtc_sum_time()</code>
will perform the cycle in reverse, relative to its origin.</p>
<p>Example: If the sum of the time have a -30h time span in a reversed cycle of
24h, the result will be 18h. By removing the full cycles of -30h you will
get -6h (-30 + 24), and -6h relative to the origin will be 18h.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>               <span class="sc">-</span> <span class="er">&lt;</span><span class="sc">---</span> h <span class="sc">--</span><span class="ot">-&gt;</span> <span class="sc">+</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                    origin</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                . . . <span class="dv">0</span> . . .</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>              .                 .</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>            .                   .</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>           .                     .</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>          .                       .</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>         .                         .</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    (<span class="sc">-</span><span class="dv">6</span>) <span class="dv">18</span>                        <span class="dv">6</span> (<span class="sc">-</span><span class="dv">18</span>)</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>         .                         .</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>          .                       .</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>           .                     .</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>            .                   .</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>             .                 .</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>                . . . <span class="dv">12</span> . . .</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>                    (<span class="sc">-</span><span class="dv">12</span>)</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="period-objects"><code>Period</code> objects<a class="anchor" aria-label="anchor" href="#period-objects"></a></h3>


<p><code><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">Period</a></code> objects are special type of objects
developed by the <a href="https://lubridate.tidyverse.org/reference/lubridate-package.html" class="external-link">lubridate</a> team that
represents "human units", ignoring possible timeline irregularities. That is
to say that 1 day as <code>Period</code> can have different time spans, when looking to
a timeline after a irregularity event.</p>
<p>Since the time span of a <code><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">Period</a></code> object can
fluctuate, <code>sum_time()</code> and <code>vct_sum_time()</code> don't accept this kind of
object. You can transform it to a <code><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">Duration</a></code> object
and still use the functions, but beware that this can produce errors.</p>
<p>Learn more about <code><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">Period</a></code> objects in the <a href="https://r4ds.had.co.nz/dates-and-times.html#periods" class="external-link">Dates and times</a> chapter of
Wickham &amp; Grolemund book (n.d.).</p>
</div>

<div class="section">
<h3 id="posixt-objects"><code>POSIXt</code> Objects<a class="anchor" aria-label="anchor" href="#posixt-objects"></a></h3>


<p><code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXt</a></code> objects in <code>...</code> will be stripped of their
dates. Only the time will be considered.</p>
<p>Both <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">POSIXct</a></code> and <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">POSIXlt</a></code> are
objects that inherits the class <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXt</a></code>. Learn more
about it in <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">?DateTimeClasses</a></code>.</p>
</div>

<div class="section">
<h3 id="interval-objects"><code>Interval</code> Objects<a class="anchor" aria-label="anchor" href="#interval-objects"></a></h3>


<p>By using <code><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">Interval</a></code> objects in <code>...</code>, <code>sum_time()</code>
and <code>vct_sum_time()</code> will consider only their time spans. That is, the
amount of seconds of the intervals.</p>
<p>Learn more about <code><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">Interval</a></code> objects in the <a href="https://r4ds.had.co.nz/dates-and-times.html#periods" class="external-link">Dates and times</a> chapter of
Wickham &amp; Grolemund (n.d.).</p>
</div>

<div class="section">
<h3 id="timeline-irregularities">Timeline Irregularities<a class="anchor" aria-label="anchor" href="#timeline-irregularities"></a></h3>


<p>This function does not take into account timeline irregularities (e.g.,
leap years, DST, leap seconds). This may not be an issue for most people, but
it must be considered when doing time arithmetic.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Wickham, H., &amp; Grolemund, G. (n.d.). <em>R for data science</em>. (n.p.).
<a href="https://r4ds.had.co.nz" class="external-link">https://r4ds.had.co.nz</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Non-vectorized sum in an linear time frame</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2020-01-01 15:00:00"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"1999-05-04 17:30:00"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/as.interval.html" class="external-link">as.interval</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-05-08"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sum_time</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "142200s (~1.65 days)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "142200s (~1.65 days)" # 39:30:00 # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Non-vectorized sum in a circular time frame of 24 hours</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dminutes</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sum_time</span><span class="op">(</span><span class="va">x</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "24600s (~6.83 hours)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "24600s (~6.83 hours)" # 06:50:00 # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"00:15"</span><span class="op">)</span>, <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"02:30"</span><span class="op">)</span>, <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">as_hms</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sum_time</span><span class="op">(</span><span class="va">x</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-in"><span><span class="co">#&gt; NA # Expected</span></span></span>
<span class="r-in"><span><span class="fu">sum_time</span><span class="op">(</span><span class="va">x</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span>, na_rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "9900s (~2.75 hours)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "9900s (~2.75 hours)" # 02:45:00 # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">12</span><span class="op">)</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">13</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sum_time</span><span class="op">(</span><span class="va">x</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span>, reverse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-3600s (~-1 hours)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "-3600s (~-1 hours)" # -01:00:00 # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">12</span><span class="op">)</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">13</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sum_time</span><span class="op">(</span><span class="va">x</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span>, reverse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "82800s (~23 hours)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "82800s (~23 hours)" # 23:00:00 # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Vectorized sum in an linear time frame</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"23:00"</span><span class="op">)</span>, <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"10:00"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">vct_sum_time</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "104400s (~1.21 days)" NA                    </span>
<span class="r-in"><span><span class="co">#&gt; [1] "104400s (~1.21 days)" NA # 29:00:00 NA # Expected</span></span></span>
<span class="r-in"><span><span class="fu">vct_sum_time</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, na_rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "104400s (~1.21 days)" "36000s (~10 hours)"  </span>
<span class="r-in"><span><span class="co">#&gt; [1] "104400s (~1.21 days)" "36000s (~10 hours)" # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Vectorized sum in a circular time frame of 24 hours</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"23:00"</span><span class="op">)</span>, <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"10:00"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">vct_sum_time</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "18000s (~5 hours)" NA                 </span>
<span class="r-in"><span><span class="co">#&gt; [1] "18000s (~5 hours)" NA  # Expected</span></span></span>
<span class="r-in"><span><span class="fu">vct_sum_time</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span>, na_rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "18000s (~5 hours)"  "36000s (~10 hours)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "18000s (~5 hours)"  "36000s (~10 hours)" # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">49</span><span class="op">)</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">24</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"24:00"</span><span class="op">)</span>, <span class="op">-</span> <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"06:00"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">vct_sum_time</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span>, reverse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-3600s (~-1 hours)"  "-21600s (~-6 hours)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "-3600s (~-1 hours)"  "-21600s (~-6 hours)" # Expected</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">49</span><span class="op">)</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="op">-</span><span class="fl">24</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"24:00"</span><span class="op">)</span>, <span class="op">-</span> <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/parse_hms.html" class="external-link">parse_hm</a></span><span class="op">(</span><span class="st">"06:00"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">vct_sum_time</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cycle <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/duration.html" class="external-link">ddays</a></span><span class="op">(</span><span class="op">)</span>, reverse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "82800s (~23 hours)" "64800s (~18 hours)"</span>
<span class="r-in"><span><span class="co">#&gt; [1] "82800s (~23 hours)" "64800s (~18 hours)" # Expected</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/danielvartan" class="external-link">Daniel Vartanian</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

